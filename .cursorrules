# Cursor AI 规则文件 - Bunny Communications OA 系统

## 项目概述
这是一个基于 Laravel + Filament 的 OA（办公自动化）系统，核心业务包括：
1. **资产记录**：通过系统记录和管理 IP 资产、设备、位置、供应商、客户等信息
2. **快速索引**：提供高效的资产搜索和查询功能
3. **任务发布**：通过工作流（Workflow）系统发布任务，分配给员工，跟踪任务状态
4. **记账审计**：记录资产成本和价格，跟踪工作流审批流程，维护审计记录

## 核心规则

### 1. 沟通方式
- **用户（项目拥有者）不懂代码**，所有技术解释必须使用通俗的商业语言或逻辑语言
- 避免使用专业术语，如必须使用，请用简单易懂的方式解释
- 用业务场景和实际效果来说明技术问题

### 2. 代码修改流程
- **修改代码前，必须先向用户说明：**
  - 修改的原因（用商业语言解释）
  - 预期效果（对业务的影响）
  - 可能的风险（如果有）
- 获得用户理解或确认后再进行修改

### 3. 问题排查优先级
- **遇到问题时，优先分析日志文件**
- 日志文件位置：`storage/logs/laravel.log`
- 可以使用 `tail -f storage/logs/laravel.log` 实时查看日志
- 也可以查看按日期分割的日志文件

### 4. 项目技术栈
- **后端框架**：Laravel 12.0
- **管理面板**：Filament 3.2
- **数据库**：SQLite（database/database.sqlite）
- **前端**：Tailwind CSS 4.0 + Vite
- **Excel 导出**：Maatwebsite Excel

### 5. 核心业务模块

#### 资产管理系统
- **IP 资产（IpAsset）**：记录 CIDR、IP 提供商、客户、位置、IPT 提供商、类型、ASN、状态、成本、价格
- **设备（Device）**：记录设备名称、类型、主 IP、位置、IPT 提供商、凭证
- **位置（Location）**：记录位置名称、类型（Colocation/Third-party）、地址、国家
- **供应商（Provider）**：IP 提供商信息
- **IPT 提供商（IptProvider）**：IPT 服务提供商信息
- **客户（Customer）**：客户信息，包括联系方式、网站、微信、Telegram、Abuse 邮箱

#### 任务管理系统
- **工作流（Workflow）**：任务标题、客户、优先级、状态、描述、截止日期、创建者、审批人、是否需要证据
- **员工（Employee）**：员工信息，包括姓名、邮箱、电话、部门（sales/technical）、在职状态
- **工作流更新（WorkflowUpdate）**：任务更新记录，包括消息、附件、更新时间、更新人

#### 权限管理
- 管理员邮箱：`admin@bunnycommunications.com`
- 只有管理员可以修改已创建的工作流
- 只有管理员可以删除工作流

### 6. 数据库结构
- 使用 Laravel Migrations 管理数据库结构
- 数据库文件：`database/database.sqlite`
- 可以通过 `check_db.php` 检查数据库状态

### 7. 开发规范
- 遵循 Laravel 和 Filament 的最佳实践
- 代码注释使用中文
- 保持代码整洁和可维护性

## 重要提醒
- 始终以业务价值为导向，用商业语言解释技术问题
- 修改前先说明原因和预期效果
- 遇到问题优先查看日志文件
- 保持对业务逻辑的深入理解，确保技术实现符合业务需求

